import random

class Gun:
    def __init__(self):
        self.bullets = 0

    def shoot(self):
        if self.bullets > 0:
            print("Bang! ðŸ”«")
            self.bullets -= 1
        else:
            print("Click! Out of bullets.")

    def reload(self, bullets_to_reload):
        print(f"Reloading {bullets_to_reload} bullets.")
        self.bullets += bullets_to_reload

    def bounce(self):
        print("The bullet bounced off the surface!")

    def explode(self):
        print("ðŸ’¥ðŸ’¥ðŸ’¥ The bullet exploded on impact!")

def handle_player_action(gun, bounce_probability):
    action = input("Enter 's' to shoot, 'r' to reload: ").lower()
    if action == 's':
        gun.shoot()
        if random.random() < bounce_probability:
            gun.bounce()
        else:
            gun.explode()
    elif action == 'r':
        gun.reload(random.randint(1, 6))
    else:
        print("Invalid choice. You missed your turn.")

def handle_random_event(enemy_probability, player_health, score, gun):
    if random.random() < enemy_probability:
        print("ðŸ‘¾ Enemy encountered!")
        damage = random.randint(10, 30)
        player_health -= damage
        if player_health <= 0:
            print(f"You were defeated. Game over! Your final score: {score}")
            return False
        else:
            print(f"You received {damage} damage. Your health: {player_health}")
    else:
        print("You explored and found extra bullets!")
        bullets_found = random.randint(1, 6)
        print(f"You found {bullets_found} bullets!")
        gun.reload(bullets_found)
    return True

def play_shooting_game():
    player_health = 100
    rounds = 20
    score = 0
    gun = Gun()

    print("Welcome to the Shooting Game!")
    difficulty = input("Choose difficulty (easy/medium/hard): ").lower()

    if difficulty == "easy":
        enemy_probability = 0.2
        bounce_probability = 0.4
    elif difficulty == "medium":
        enemy_probability = 0.4
        bounce_probability = 0.3
    else:
        enemy_probability = 0.6
        bounce_probability = 0.9

    for round_number in range(1, rounds + 1):
        print(f"\nRound {round_number}")
        handle_player_action(gun, bounce_probability)
        event_result = handle_random_event(enemy_probability, player_health, score, gun)
        if not event_result:
            break
        score += 10

    print("Game over! Better luck next time!")

# Run the game
play_shooting_game()
